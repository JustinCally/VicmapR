
<!-- README.md is generated from README.Rmd. Please edit that file -->

# VicmapR <img src='man/figures/logo.png' align="right" height="139" />

<!-- badges: start -->

[![Codecov test
coverage](https://codecov.io/gh/JustinCally/VicmapR/branch/master/graph/badge.svg)](https://app.codecov.io/gh/JustinCally/VicmapR?branch=master)
[![Lifecycle:
stable](https://img.shields.io/badge/lifecycle-stable-brightgreen.svg)](https://lifecycle.r-lib.org/articles/stages.html#stable)
<!-- [![R build status](https://github.com/JustinCally/VicmapR/workflows/R-CMD-check/badge.svg)](https://github.com/JustinCally/VicmapR/actions) -->
[![CRAN
status](https://www.r-pkg.org/badges/version/VicmapR)](https://CRAN.R-project.org/package=VicmapR)
[![](http://cranlogs.r-pkg.org/badges/grand-total/VicmapR?color=ff69b4)](https://cran.r-project.org/package=VicmapR)
<!-- [![Devel version](https://img.shields.io/badge/devel%20version-0.1.3-blue.svg)](https://github.com/JustinCally/VicmapR) -->
<!-- [![Code size](https://img.shields.io/github/languages/code-size/JustinCally/VicmapR.svg)](https://github.com/JustinCally/VicmapR) -->
[![R-CMD-check](https://github.com/JustinCally/VicmapR/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/JustinCally/VicmapR/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

The goal of VicmapR is to provide functions to easily access Victorian
Government spatial data through their WFS (Web Feature Service). VicmapR
leverages code and a lazy querying approach developed by [Teucher et
al. (2021)](https://joss.theoj.org/papers/10.21105/joss.02927) for the
[{bcdata} R package](https://bcgov.github.io/bcdata/), which allows for
a responsive and precise querying process.

## Migration of Victoria’s Open Data Geoserver

**From March 2023 (`VicmapR v0.2.0`) the way `VicmapR` obtains data has
changed**

In March 2023 the data platform used by `VicmapR` will be migrated with
the legacy platform discontinued. Changes have been to the `VicmapR`
package to allow for the conversion and translation of of code in an
effort to ensure legacy code still works. However, the migration may
have unseen consequences and users are encouraged to review code.

## Installation

You can install the released version from CRAN with:

``` r
install.packages("VicmapR")
```

Or you can install the the development version from
[GitHub](https://github.com/) with:

``` r
# install.packages("remotes")
remotes::install_github("JustinCally/VicmapR")
```

### Dependencies

Currently, the ability to use accurate geometric filters using `VicmapR`
requires GDAL \> 3.0. To see how to upgrade your version of GDAL and
link it to the `sf` package visit:
<https://r-spatial.github.io/sf/#installing>

``` r
library(sf)
#> Warning: package 'sf' was built under R version 4.1.2
#> Linking to GEOS 3.10.2, GDAL 3.4.2, PROJ 8.2.1; sf_use_s2() is TRUE
sf::sf_extSoftVersion()
#>           GEOS           GDAL         proj.4 GDAL_with_GEOS     USE_PROJ_H 
#>       "3.10.2"        "3.4.2"        "8.2.1"        "false"         "true" 
#>           PROJ 
#>        "8.2.1"
```

## Example

### Searching for data

``` r
library(VicmapR)
#> 
#> Attaching package: 'VicmapR'
#> The following object is masked from 'package:stats':
#> 
#>     filter

# Check to see if the geoserver is working. It will error if it is not working  
check_geoserver()
#> [1] TRUE

listLayers(pattern = "road", ignore.case = T)
#>                                              Name                       Title
#> 1          open-data-platform:ad_lga_area_polygon         ad_lga_area_polygon
#> 2     open-data-platform:ad_locality_area_polygon    ad_locality_area_polygon
#> 3             open-data-platform:ad_vicgov_region            ad_vicgov_region
#> 4               open-data-platform:bores_v_public              bores_v_public
#> 5                      open-data-platform:bu_lter                     bu_lter
#> 6                      open-data-platform:bu_mter                     bu_mter
#> 7                      open-data-platform:bu_uter                     bu_uter
#> 8                    open-data-platform:bu_wtable                   bu_wtable
#> 9               open-data-platform:cl_tenure_view              cl_tenure_view
#> 10                open-data-platform:delwp_region                delwp_region
#> 11                 open-data-platform:depi_region                 depi_region
#> 12                  open-data-platform:dse_region                  dse_region
#> 13 open-data-platform:geol_struct_goulburn_murray geol_struct_goulburn_murray
#> 14      open-data-platform:geomark_index_centroid      geomark_index_centroid
#> 15        open-data-platform:geomark_index_extent        geomark_index_extent
#> 16                open-data-platform:geomark_line                geomark_line
#> 17               open-data-platform:geomark_point               geomark_point
#> 18             open-data-platform:geomark_polygon             geomark_polygon
#> 19            open-data-platform:gov_road_polygon            gov_road_polygon
#> 20                     open-data-platform:lsys100                     lsys100
#> 21                     open-data-platform:lsys250                     lsys250
#> 22                    open-data-platform:ramsar25                    ramsar25
#> 23                open-data-platform:recweb_track                recweb_track
#> 24       open-data-platform:road_casement_polygon       road_casement_polygon
#> 25                   open-data-platform:soil_type                   soil_type
#> 26                     open-data-platform:tr_road                     tr_road
#> 27      open-data-platform:tr_road_infrastructure      tr_road_infrastructure
#> 28            open-data-platform:tr_road_register            tr_road_register
#> 29       open-data-platform:veac_metro_open_space       veac_metro_open_space
#> 30        open-data-platform:vic_railway_corridor        vic_railway_corridor
#> 31              open-data-platform:vmlite_tr_road              vmlite_tr_road
#>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Abstract
#> 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Part of the Vicmap Admin dataset series.  This dataset contains Local Government Boundaries (LGA's) polygons.  LGA's are as defined by Dept. for Victorian Communities (DVC).\nAligned to Road Network - Vicmap Transport.
#> 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       Part of the Vicmap Admin dataset series.  Locality  Boundaries Boundary polygons for Victoria.  Locality Boundaries are as defined by The Registrar of Geographic Names.\nAligned to Road Network - Vicmap Transport.
#> 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Part of the Vicmap Admin dataset series.  \n\nThis dataset contains the Victorian Government Regional Departmental Boundaries as defined by Local Government Victoria, Dept. of Planning & Community Development (DPCD). There are eight regions.\n\nAligned to Road Network - Vicmap Transport.
#> 4  Contains mineral, petroleum, coal & groundwater boreholes.  Minerals boreholes (and, to a lesser extent, petroleum wells) are actively maintained in the dataset.  The custodial role for groundwater and coal boreholes is in the private sector, and these parts of the dataset are not actively maintained.\n\nMineral, petroleum and coal boreholes are updated on an irregular basis:  Mineral borehole data are supplied by individual companies usually when their overlaying Exploration Licence expires; Coal borehole data have been updated from GHD Pty Ltd's (formerly GEO-ENG) data. Groundwater boreholes have not been updated since 1990 when the custodial role was given to Sinclair Knight Merz Pty Ltd (SKM) - refer to BORES100.\n\nThe origin of data varies considerably.  Prior to 1980 borehole data was recorded by the Geological Survey of Victoria (GSV) on 1 inch:1 mile plans and hard-copy borehole records.  This included data for water boreholes drilled by public and private sector, all boreholes drilled by GSV, petroleum wells, and some private-sector mineral exploration boreholes.  In areas where drilling was of particularly high density, locations were recorded on these plans as a single point or as occurring within an outlined area.\n\nThe parish was traditionally used as the primary classifier for numbering boreholes.  Some minor anomalies exist where a borehole and parish boundary may be on one side of a road or the other, or where parish boundaries have been moved.\n\nIn 1980 the location data was moved to 1:100,000 AMG plans.  In the mid-1980s a program of electronic capture commenced.  Borehole locations were digitised from the 1:100,000 plans with an accuracy of +/-300m.  For the areas of high borehole density where boreholes were plotted on a single point, often only the first ten and last ten were recorded in the database.  Boreholes whose parish was known but exact location was unknown were also recorded, but do not have a location.\n\nGroundwater boreholes:\nExtensive hydrological data was originally held by GSV, but these data are now held by SKM.  \n\nCoal boreholes:\nLocation and lithological data for coal boreholes has been provided by Geo-Eng and the old State Electricity Commission of Victoria.\n\nMineral exploration boreholes:\nThe capture of mineral exploration borehole data from open-file exploration reports commenced in 2001 and will progressively cover the state over a number of years.  The data are being captured at an whatever accuracy the source allows, typically between 20 and 250 m.  Assay data have been consistently captured.  Other downhole data, such as lithology, have not been consistently captured.\n\nTenement information for the small number of private-sector mineral exploration boreholes captured prior to 2001 was lost in the migration from the original VAX database to the current Ingres corporate database.\n\nHeavy mineral sand exploration: complete coverage up for data up to April 2002; updates planned for late 2003.\nOther mineral exploration:  coverage as follows - \n  St Arnaud, Charlton, Wedderburn 1:100 000 mapsheets - 31 March, 2001;\n  Dunolly, Rupanyup, Donald, Ararat, Grampians, Willaura 1:100 000 mapsheets -\t30 August 2001;\n  Warburton 1:250 000 mapsheet - 30 June 2002 (available mid-2003);\n  Ballarat, Creswick, Skipton, Beaufort 1:100 000 mapsheets - 30 June 2002 (available mid-2003);\n  Bendigo 1:250 000 - 31 October 2002 (available mid-2003)\n\n\nGroundwater data can be obtained at the following site \nhttp://www.dse.vic.gov.au/waterdata
#> 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            This layer is part of a set that defines the beneficial use of Victoria's groundwater resources.\nAccording to the Victorian Environmental Protection Authority (EPA), a beneficial use is a use to the environment,  or a segment of the environment which is conductive to public benefit,  welfare,  safety, health or aesthetic enjoyment and which requires protection from the effects of waste discharges, emissions or deposits.  A beneficial use may be an existing or potential use. A resource may have more than one beneficial use.\nThe State's groundwater resources have a number of beneficial uses.  These uses primarily depend on groundwater quality and aquifer yield and can be assigned to broad water quality classes.
#> 6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            This layer is part of a set that defines the beneficial use of Victoria's groundwater resources.\nAccording to the Victorian Environmental Protection Authority (EPA), a beneficial use is a use to the environment,  or a segment of the environment which is conductive to public benefit,  welfare,  safety, health or aesthetic enjoyment and which requires protection from the effects of waste discharges, emissions or deposits.  A beneficial use may be an existing or potential use. A resource may have more than one beneficial use.\nThe State's groundwater resources have a number of beneficial uses.  These uses primarily depend on groundwater quality and aquifer yield and can be assigned to broad water quality classes.
#> 7                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            This layer is part of a set that defines the beneficial use of Victoria's groundwater resources.\nAccording to the Victorian Environmental Protection Authority (EPA), a beneficial use is a use to the environment,  or a segment of the environment which is conductive to public benefit,  welfare,  safety, health or aesthetic enjoyment and which requires protection from the effects of waste discharges, emissions or deposits.  A beneficial use may be an existing or potential use. A resource may have more than one beneficial use.\nThe State's groundwater resources have a number of beneficial uses.  These uses primarily depend on groundwater quality and aquifer yield and can be assigned to broad water quality classes.
#> 8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            This layer is part of a set that defines the beneficial use of Victoria's groundwater resources.\nAccording to the Victorian Environmental Protection Authority (EPA), a beneficial use is a use to the environment,  or a segment of the environment which is conductive to public benefit,  welfare,  safety, health or aesthetic enjoyment and which requires protection from the effects of waste discharges, emissions or deposits.  A beneficial use may be an existing or potential use. A resource may have more than one beneficial use.\nThe State's groundwater resources have a number of beneficial uses.  These uses primarily depend on groundwater quality and aquifer yield and can be assigned to broad water quality classes.
#> 9                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                NOTE: This layer is current up to August 2011.\n\nPart of the Vicmap Crown Land Tenure dataset series.  This is a statewide dataset that plays a key role in the management of Victoria's Crown land. It has been created (June 2003 - Feb 2004) from migrating LCMP layers into the Vicmap structure.\n\nThe layer provides information about the Private use of Crown land Parcels and Crown Roads.\n\nThe database is continually maintained, obtaining maintenance from authoritative sources within State Government.\n\nCL_TENURE_VIEW contains a number of Tenure types including:\n- (A) Agricultural including Unused Road licences, Water Frontage licences and Grazing licences,\n- (L) Lease including Commercial type leases,\n- (G) General Licences including miscellaneous community use licences, permits & consents\n- (P) Pipe including Water supply pipelines,\n- (RM) Reserve including land gazetted as a Reserve in Government Gazettes,\n- Tenure Identifiers, Tenure type identifiers and Tenure code identifiers.\n- Unique feature identifiers, date stamps and data quality information.\n- Cross reference to Vicmap Property.
#> 10                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Part of the Vicmap Admin dataset series.  This dataset contains the Department of Environment, Land, Water and Planning (DELWP) Regional Boundaries as defined by DELWP. \nThe regions are based on the Victorian Government Regional Boundaries. The main difference is that the three metropolitan regions have been aggregated to form the Port Phillip region, there are six regions.\nAligned to Road Network - Vicmap Transport.
#> 11                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           This dataset will be replaced by the dataset VMADMIN_DELWP_REGION on 15 May 2015.\n\nThis dataset contains the Department of Environment and Primary Industries (DEPI) Regional Boundaries as defined by DEPI. \n\nThe regions are based on the Victorian Government Regional Boundaries. The main difference is that the three metropolitan regions have been aggregated to form the Port Phillip region, there are six regions.\n\nAligned to Road Network - Vicmap Transport.
#> 12                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   Replaced by the dataset VMADMIN_DEPI_REGION.\n\nThis dataset contains the Department of Sustainability & Environment (DSE) Regional Boundaries as defined by DSE. \n\nThe regions are based on the Victorian Government Regional Boundaries. The main difference is that the three metropolitan regions have been aggregated to form the Port Phillip region, and the Grampians and Barwon South-West regions have been aggregated to form the South West region. There are five regions.\n\nAligned to Road Network - Vicmap Transport.
#> 13                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      This dataset consists of a series of approximate WSW to ENE oriented 'geological structures' interpreted from residual gravity bedrock depth in the Goulburn-Murray area of Victoria. These structures segment the Goulburn River Valley into an upper, middle and lower Goulburn bedrock valley system suggesting that it is a broadening out upland groundwater system for most of its length.\n\nThe dataset was compiled by GHD to inform the report 'Potential Influences of Geological Structures on Groundwater Flow Systems' for DEPI's Secure Allocation Future Entitlements (SAFE) Project.
#> 14                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Point location of named or 'could be' named Victorian topographic features. Inclusions are rivers, water bodies, transport (excluding roads), geographic features and most of the  Vicmap Features of Interest content. These features all reside within the Vicmap Framework Products. \nFeatures are combined to create one piece of geometry based on name and type. The centroid table holds ALL features ONCE regardless of whether they were derived from a point, line or polygon.
#> 15                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Polygon extent of named or 'could be' named Victorian topographic features. Inclusions are rivers, water bodies, transport (excluding roads), geographic features and most of the  Vicmap Features of Interest content. These features all reside within the Vicmap Framework Products. \nFeatures are combined to create one piece of geometry based on name and type. The extent table holds ALL features ONCE regardless of whether they were derived from a point, line or polygon.
#> 16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Linear location of named or 'could be' named  Victorian topographic features. Inclusions are rivers, water bodies, transport (excluding roads), geographic features and most of the Vicmap Features of Interest linear content. These features all reside within the Vicmap Framework Products. \nFeatures are combined to create one piece of geometry based on name and type. \nLinear features include transmission lines, chairlifts and pipelines
#> 17                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Point location of named or could be named Victorian topographic features. Inclusions are rivers, water bodies, transport (excluding roads), geographic features and most of the Vicmap Features of Interest point content. These features all reside within the Vicmap Framework Products. \nFeatures are combined to create one piece of geometry based on name and type. \nPoints represent relatively small area features which have been generalised or larger features where the spatial source is a coordinate or an address and hence that entity point represents that feature
#> 18                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Polygon location of named or could be named Victorian topographic features. Inclusions are rivers, water bodies, transport (excluding roads), geographic features and most of the  Vicmap Features of Interest polygon content. These features all reside within the Vicmap Framework Products. \nFeatures are combined to create one piece of geometry based on name and type. \nPolygons represent larger area features that have been captured in more detail.  Examples include lakes, sports grounds, botanic gardens, municipal reserves and shopping precincts.
#> 19                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Part of the Vicmap Crown Land Tenure dataset series.  This dataset plays a key role in the management of Victoria's Crown land. It is being created (June 2003 - Feb 2004) from migrating LCMP layers into the Vicmap structure.  At this stage it does not cover Metropolitan Melbourne.\n\nThe layer provides information about Crown Roads.\n\nThe dataset is continually maintained, obtaining maintenance from authoritative sources within State Government.\n\nGOV_ROAD_POLYGON is a polygon layer depicting Government Roads including roads as laid out on Parish Plans & proclaimed as Road in Government Gazettes.\n\nThe Vicmap Parcel and VM_CROWN_SIMPLE layer is also recording "G" CROWN_STATUS Parcels that are Government Roads parcelled by the Crown Land Registry unit.
#> 20                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   The land systems of Victoria, as described and delineated by Rowan in 1989, provide a statewide coverage of land type that are applicable to a wide range of land resource management and planning programs.  This dataset consolidates a broad range of land resource information drawn from an uneven base to provide a consistent, if limited, coverage of the lands of Victoria.  The explicit links with the original sources of data have been retained.  The data set was developed from a range of studies of varying methologies and intensities over some forty years. \nThe reliability of the information varies across regions accordingly.
#> 21                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         The land systems of Victoria, as described and delineated by Rowan in 1989, provide a statewide coverage of land types that are applicable to a wide range of land resource management and planning programs. These land systems sit within a geomorphological framework developed by Jenkin and Rowan.\n\nThis data set consolidates a broad range of land resource information drawn from an uneven base to provide a consistent, if limited, coverage of the lands of Victoria. The explicit links with the original sources of data have been retained.\n\nThe data set was developed from a range of studies of varying methodologies and intensities over some forty years. The reliability of the information varies across regions accordingly.\n\nThis edition (3) incorporates new survey material [Shires of West Wimmera, Lowan, West Towong and East Gippsland (east of Snowy River)] as well as changes in the nomenclature with the substitution of broad slope class with relative relief classes (eg. plains, hills, mountains).  An addition factor (lithological age) was also added to the key.  There is still a link with the Edition 2 version in the main Land Systems table.\n\nMore information on land system mapping can be found on Victorian Resources Online\nhttp://vro.depi.vic.gov.au/dpi/vro/vrosite.nsf/pages/landform_systems\n\nDOI 10.4226/92/58e727e0dd1be
#> 22                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Polygons defining Ramsar wetland areas in Victoria.  The Ramsar Convention of Wetlands of International Importance, to which Australia is a signatory, requires contracting parties to designate wetlands of international significance within their territory for listing under the convention.\n\nThis layer is based on RAMSAR100 but has been realigned and updated to improve its accuracy. It has been updated to match current VICMAP parcel, road, hydro and water area data as well as using high-resolution digital aerial photography to improve its precision to 1:25 000.
#> 23                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   A derived dataset of extracted features from Vicmap TR_ROAD dataset that represents the DELWP-managed recreation track network mainly in State Forest.  \nRecreation Tracks within State Forest dataset represents walking/cycling tracks and touring routes within State Forest.  This dataset will assist staff in their management roles and facilitate promotion to the public.   All tracks are actively promoted to the public and maintained by the Department of Environment, Land, Water & Planning. This dataset was initially created as part of the 2004 Recreation Facilities Database project and is now actively maintained through Vicmap Roads and extracted for use with apps and asset management tools.It is regularly updated to reflect changes to our recreationals tracks (including walking, mountain biking and other tracks).
#> 24                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   See Vicmap Property product for details.
#> 25                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         A spatial map layer of soil type (Australian Soil Classification) for Victoria. The harmonised map consists of 3,300 land units (totaling about 225,000 polygons) derived from around 100 soil and land surveys carried out in Victoria over the past 70 years. The land units have been attributed according to the Australian Soil Classification (Order and Suborder levels of the classification scheme) based on their likely dominant soil type. Particular attention was given to harmonising land units across survey boundaries. A reliability index has been assigned to each land unit based on the quality and relevance of the originating survey, providing a qualitative reliability measure to support interpretation and data use.\n\nSoil site data contained in the Victorian Soil Information System (VSIS), and information on the Victorian Resources Online (VRO) website and original study reports have been combined with landscape knowledge to develop the new maps. Data from approximately 10,000 existing sites recorded, mostly recorded in the VSIS have been used.\n\nThe soil type is based on land mapping conducted at different times, at variable scale, and for different purposes. Land units are therefore of variable scale and quality in relation to the soil they are representing. Many units will be comprised of multiple soil types and a range of soil properties, and local variability (e.g. at paddock scale level) can also sometimes be high. The mapping, therefore, is intended to represent the dominant, or most prevalent, broad soil type within the map unit. It is therefore adequate for regional or state-wide overviews but may not often be accurate enough for localised or within-farm assessments. For more detailed soil and land information, users are advised to refer to the original land study for any given map unit (e.g. via Victorian Resources Online website).
#> 26                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            This layer is part of Vicmap Transport and is and extensive digital road network - line features delineating state wide road network.\nIncludes; Bridges, Connectors, Footbridge, Ferry Route, Foot Tracks, Roads, Highways, Roundabouts & Tunnels.\n\nAttribution for names, alias, class, direction, locality, unique feature identification, suburb/locality.  Includes alternate names.\n\nFormerly known as Road Network 1:25,000 (Full View) - Vicmap Transport (ROAD_VF)
#> 27                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    This layer is part of Vicmap Transport and contains point features delineating road infrastructure features.\nIncludes; Bridges, Tunnels, Gates, Cattle Grids, Barrirers, Level Crossings, Roundabouts & Intersections.
#> 28                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          TR_ROAD_REGISTER forms the basis of the road register for Victoria.\n\nRoad segements (TR_ROAD) are grouped by road name, road type, road suffix and locality using the TR_ROAD_LOCALITY_SECTION and TR_ROAD_LOCALITY tables to create a single line feature for each unique combination of values.   \n\nThis dataset compliments TR_ROAD.   Where a road segement has multiple names, TR_ROAD_REGISTER will have multiple overlappling road lines while TR_ROAD will have one road with multiple names.\n\nTR_ROAD_REGISTER facilitates road searching and efficent road name lablelling.\n\nIn addition the dataset has an atttribute MIN_CLASS_CODE which is the the minimum CLASS_CODE for all TR_ROAD road lines that have the unique cominbination of identifer vaules.  For example, if the road segments associated with the unique road identifer have CLASS_CODES of 0  (Freeway), 1 (Highway) and 2 (Arterial), the MIN_CLASS_CODE of that road will be 0 (Freeway).   This value faciliates feature filtering at different scales and symbolisation.
#> 29                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              The dataset consists of polygons delineating areas of public land(1) and local council land(2) that have been classified as public open space. Polygon attributes describe the public open space category and owner. The datset covers 31 municipalities in metropolitan Melbourne. \n\nThe definition used to attribute a polyon as public open space is 'those areas of public land and local council land that have an accepted and ongoing community use for outdoor recreation and informal activities, and that are freely accessible to the public'.\n\nThe VEAC Metropolitan Melbourne Open Space Inventory does not include Commonwealth land; schools; cemeteries; gated facilities; road plantations; closed roads; concourses around stadia; inaccessible Trust for Nature properties; 'services and utilities' public land that does not have an ongoing recreational use; future open space (e.g. areas covered by Public Aquisition Overlays); and uncategorised public land.\n\n1. 'Public Land' is Crown land and freehold land owned by Victorian Government Agencies.\n\n2. 'Local Council Land' is freehold land owned by local councils.
#> 30                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          This polyline dataset represents the centreline of operational rail corridors in Victoria. The data includes VicTrack owned corridors and spurs into privately owned freight facilities. The data may also include any "under construction" corridors. The data does not include Tourist/Heritage Railways. \n\nThe data includes attributes which identify if the corridors are used by Metro (MTM) services, V/Line services, freight services and interstate services. The attributes also identify the presence of broad, standard and dual guage tracks in the corridor and the presence of electrification in the corridor.
#> 31                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               This layer is part of Vicmap Lite and contains line features representing the road network. Vicmap Lite datasets are suited for use between scales of 1: 250,000 and 1 : 5 million.  The linework was sourced from Vicmap Transport. The level of attribute information, the number of features and the number of vertices has been simplified to suit the 1: 250,000  - 1 : 5 million scale range. The concept of a Scale Use Code has been introduced to help control the level of detail displayed.\n\nSearch:- roads, road, track, highway, transport.\n\nTHIS DATASET WAS LAST UPDATED IN DECEMBER 2015
#>                              metadataID
#> 1  bc822a9c-3766-57ac-a034-bcad3fb66d86
#> 2  6ed3b98f-b277-564a-997e-962be72c5ae8
#> 3  45394ea3-d758-59e2-8937-d8390cc90d7e
#> 4  9761f7d7-d8c7-5fb5-8444-a1851af24892
#> 5  a74a5e79-a807-55bd-ba07-a8c9beb36945
#> 6  d854edf3-5f11-5bbb-82be-80976ae9ff13
#> 7  13afa68e-e50e-5a55-ae6f-70b1cc54987d
#> 8  b1ff0547-3877-5500-9556-c089044c0d69
#> 9  579d189a-cdd6-5d1b-a02c-3c6f2ce5662c
#> 10 ee40a50c-169b-5550-9fb4-346110bc12b1
#> 11 a786903c-4942-5f02-b6a6-a6d93503733a
#> 12 015dfb02-2f5e-5f24-9200-fb70a8b9e55b
#> 13 805b3c99-df21-59af-ae1d-e28408d63dbc
#> 14 9862178d-c657-55de-a163-8ae4f4581472
#> 15 06752d21-78b7-5bd0-90c8-60a383b1e595
#> 16 243306da-ecf3-5761-a9b9-0b404baeb0ce
#> 17 8197d5b0-dd09-5e12-878f-a631f9dee9e2
#> 18 ca6894d6-87fe-563c-a86c-c81d6bbbb64d
#> 19 739a18cc-d98f-5da7-9b72-b6426aad3c8d
#> 20 df00aee2-b32d-5cff-b4f1-aa36a24e6a15
#> 21 74130d00-be40-5993-9455-5c651ba5717f
#> 22 68b1e21c-be86-50d9-9a60-a14ae598ae80
#> 23 ebacb087-b10b-5962-b051-e77b4de23f2e
#> 24 8f038fe6-db8a-5e29-b9b4-738d20f9c4d5
#> 25 c6499383-f8eb-5cf6-9463-b04bc4b017fe
#> 26 61f633ae-c18c-5967-a546-84ceb44273f6
#> 27 359796da-2caa-5c38-9837-9a67f920675f
#> 28 72408ab9-7ab5-5aba-8d26-1154c46a9cb4
#> 29 9362b7a4-3615-5d67-a6bf-e8693d535eb7
#> 30 5ce84b17-27fe-5fc9-9934-f9f4f00660b0
#> 31 93ffd2f2-fc95-52c9-b38e-12f3c6523ab4
```

### Reading in data

As of VicmapR version `0.1.0` data is read in using a lazy evaluation
method with the convenience of pipe operators (`%>%`). A lot of the
methods and code have already been written for a similar package
([bcdata](https://github.com/bcgov/bcdata)) that downloads data from the
British Columbia WFS catalogues. Using a similar approach, VicmapR
allows users to construct a WFS query in a step-wise format. In doing so
a query is reserved until `collect()` is used on the `vicmap_promise`.
The example below shows an extensive example of how the to easily read
in spatial data:

``` r
# Read in an example shape to restrict our query to using geometric filtering
melbourne <- sf::st_read(system.file("shapes/melbourne.geojson", package="VicmapR"), quiet = T)

# Obtain a promise of what data will be returned for a given layer
vicmap_query(layer = "open-data-platform:hy_watercourse")
#> • Using collect() on this object will return 1837830 features and 15
#> • fields
#> • At most six rows of the record are printed here
#> ────────────────────────────────────────────────────────────────────────────────
#> Simple feature collection with 6 features and 14 fields
#> Geometry type: LINESTRING
#> Dimension:     XY
#> Bounding box:  xmin: 141.5126 ymin: -34.40608 xmax: 142.3502 ymax: -34.37683
#> Geodetic CRS:  GDA94
#> # A tibble: 6 × 15
#>   id       pfi    ufi featu…¹ name  named…² origin usage hiera…³ featu…⁴ const…⁵
#>   <chr>  <int>  <int> <chr>   <chr> <chr>   <chr>  <chr> <chr>     <int> <chr>  
#> 1 hy_w… 8.55e6 2.55e6 waterc… <NA>  <NA>    2      3     L          4762 1      
#> 2 hy_w… 8.55e6 2.55e6 waterc… <NA>  <NA>    2      3     L          4762 1      
#> 3 hy_w… 8.55e6 2.55e6 waterc… <NA>  <NA>    2      3     L          4762 1      
#> 4 hy_w… 8.55e6 2.55e6 waterc… <NA>  <NA>    2      3     L          4762 1      
#> 5 hy_w… 8.55e6 2.55e6 waterc… <NA>  <NA>    1      1     L          4762 <NA>   
#> 6 hy_w… 8.55e6 2.55e6 waterc… <NA>  <NA>    2      3     L          4762 1      
#> # … with 4 more variables: superceded_pfi <chr>, create_date_pfi <date>,
#> #   create_date_ufi <date>, geometry <LINESTRING [°]>, and abbreviated variable
#> #   names ¹​feature_type_code, ²​named_feature_id, ³​hierarchy,
#> #   ⁴​feature_quality_id, ⁵​construction

# Build a more specific query and collect the results
vicmap_query(layer = "open-data-platform:hy_watercourse") %>% # layer to query
  filter(hierarchy == "L" & feature_type_code == 'watercourse_channel_drain') %>% # simple filter for a column
  filter(INTERSECTS(melbourne)) %>% # more advanced geometric filter
  select(hierarchy, pfi) %>% 
  collect()
#> Simple feature collection with 8 features and 3 fields
#> Geometry type: LINESTRING
#> Dimension:     XY
#> Bounding box:  xmin: 144.909 ymin: -37.81511 xmax: 144.9442 ymax: -37.78198
#> Geodetic CRS:  GDA94
#> # A tibble: 8 × 4
#>   id                          pfi hierarchy                             geometry
#>   <chr>                     <int> <chr>                         <LINESTRING [°]>
#> 1 hy_watercourse.1081170 14608731 L         (144.9365 -37.81511, 144.9359 -37.8…
#> 2 hy_watercourse.1053721 14577596 L         (144.929 -37.81409, 144.9294 -37.81…
#> 3 hy_watercourse.1053724 14577602 L         (144.9288 -37.81417, 144.9292 -37.8…
#> 4 hy_watercourse.1633273 14608434 L         (144.9403 -37.78253, 144.9401 -37.7…
#> 5 hy_watercourse.1633275 17520306 L         (144.9415 -37.78232, 144.9414 -37.7…
#> 6 hy_watercourse.1633277 14615146 L         (144.9442 -37.78198, 144.9441 -37.7…
#> 7 hy_watercourse.1740235 19272791 L         (144.9287 -37.8033, 144.9186 -37.80…
#> 8 hy_watercourse.1740603 14608551 L         (144.9201 -37.79069, 144.9202 -37.7…
```

VicmapR translates numerous geometric filter functions available in the
Victorian Government’s WFS Geoserver supports numerous [geometric
filters](https://docs.geoserver.org/stable/en/user/tutorials/cql/cql_tutorial.html#geometric-filters):

-   `EQUALS`  
-   `DISJOINT`  
-   `INTERSECTS`  
-   `TOUCHES`  
-   `CROSSES`  
-   `WITHIN`  
-   `CONTAINS`
-   `OVERLAPS`  
-   `DWITHIN`  
-   `BEYOND`  
-   `BBOX`

These filters can be used within the `filter()` function by providing
them an object of class `sf/sfc/sfg/bbox` as shown above with the
`melbourne` object.

### Using other WFS urls

Using `options(vicmap.base_url)` VicmapR can query data from other WFS
services; while this remains somewhat untested it is relatively easy to
point VicmapR to another WFS url. This option would need to be set every
session to override the base VicmapR url. For instance, the BOM WFS can
be used as follows:

``` r
# set the new base url
options(vicmap.base_url = "http://geofabric.bom.gov.au/simplefeatures/ahgf_shcatch/wfs")

# collect a data sample
catchments <- vicmap_query("ahgf_shcatch:AHGFCatchment") %>% 
  head(10) %>% 
  collect()
```

***Note**: Using other Geoserver WFS urls will not necessarily work as
expected due to the potential differences in the capabilities of the
Geoserver instance*

### License

Copyright 2018 Province of British Columbia  
Modifications Copyright 2020 Justin Cally

Licensed under the Apache License, Version 2.0 (the “License”); you may
not use this file except in compliance with the License. You may obtain
a copy of the License at

<https://www.apache.org/licenses/LICENSE-2.0.txt>

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
